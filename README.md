# Real Matzip API
ì§„ì§œë§›ì§‘ í”„ë¡œì íŠ¸ì˜ ë©”ì¸ apiì„œë²„

## 1. Install
### pip
```shell
pip install -r requirements.txt
```
### Migration
```shell
python manage.py makemigrations

python manage.py migrate
```

### Run
```shell
python manage.py runserver 0.0.0.0:8443

python waitress-server.py
```
## 2. Usage
### (1) í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í†µì‹ ìš©
#### GET baseurl/posts/<í‚¤ì›Œë“œ>
í‚¤ì›Œë“œë¡œ ìŠ¤í¬ë© ëœ ëª¨ë“  í¬ìŠ¤íŠ¸ë“¤ì„ ë°˜í™˜í•©ë‹ˆë‹¤. <br>
posted_date ìµœì‹ ìˆœìœ¼ë¡œ ë³´ì—¬ì§‘ë‹ˆë‹¤. <br>
ex) GET http://localhost:8443/posts/ëª…ë™ë§›ì§‘
```json
[
    {
        "id": 28904,
        "post_id": "CW----UvPGp",
        "post_url": "https://www.instagram.com/p/CW----UvPGp/",
        "img_url": "https://www.instagram.com/p/CW----UvPGp/media/?size=l",
        "keyword": "ëª…ë™ë§›ì§‘",
        "food_score": 77.08,
        "scraped_date": "2021-11-26T15:31:48.386112+09:00",
        "posted_date": "2021-11-26T15:28:18+09:00",
        "post_text": "--ì´ë‘ ë°ì´íŠ¸ ------ â¤ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œ\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n#ëª…ì§ë§›ì§‘\r\n#ëª…ëŒ€ì‚¬\r\n#ëª…ë‘ê³¨í”„\r\n#ëª…ë™ë§›ì§‘\r\n#ëª…ë™\r\n#ëª…í’ˆê°€ë°©ì¶”ì²œ\r\n#ëª…ì–¸\r\n#ëª…ìƒ\r\n#ëª…ì–¸ìŠ¤íƒ€ê·¸ë¨\r\n#ëª…í’ˆë°±\r\n#ëª…ì ˆ\r\n#ëª…í’ˆì˜ë¥˜\r\n#ëª…í’ˆì§€ê°‘\r\n#ëª…í’ˆìš´ë™í™”\r\n#ëª…í’ˆíŒ¨ë”©\r\n#ëª…í™”\r\n#ëª…ì ˆì„ ë¬¼\r\n#ëª…ê³¡\r\n#ëª…í’ˆë„ë§¤\r\n#ëª…ì§€ëŒ€\r\n#ëª…í’ˆìƒµ\r\n#ëª…í’ˆì‹ ìƒ\r\n#ëª…ë™êµì\r\n#ëª…í’ˆì‹ ë°œ\r\n#ëª…í™”ê·¸ë¦¬ê¸°\r\n#ëª…ë¶ˆí—ˆì „\r\n#ëª…í’ˆë²¨íŠ¸\r\n#ë©¸ì¹˜ë³¶ìŒ\r\n#ë©¸ë§\r\n#ë©¸ì¹˜íƒˆì¶œ",
        "insta_analysis": "",
        "insta_analysis_food": false,
        "is_ad": false
    },
    {
        "id": 28900,
        "post_id": "CWu----voE8",
        "post_url": "https://www.instagram.com/p/CWu----voE8/",
        "img_url": "https://www.instagram.com/p/CWu----voE8/media/?size=l",
        "keyword": "ëª…ë™ë§›ì§‘",
        "food_score": 95.6,
        "scraped_date": "2021-11-26T15:31:42.961757+09:00",
        "posted_date": "2021-11-26T15:26:14+09:00",
        "post_text": "ì¶”ì²œ ë©”ë‰´ ì‚¼ê²¹ì‚´,ê³±ì°½ ë§ˆë¬´ë¦¬ ê¹€ì¹˜ë§ì´êµ­ìˆ˜ í¬ìœ¼~\n#ì´ˆë°˜ì‹ë‹¹\n.\n.\n#ì¶©ë¬´ë¡œë§›ì§‘ #ì„ì§€ë¡œë§›ì§‘ #ì„ì§€ë¡œ3ê°€ë§›ì§‘ #ì„ì§€ë¡œë°ì´íŠ¸ #ëª…ë™ë§›ì§‘ #ëª…ë™ë°ì´íŠ¸ #ë‚¨ì‚°ë§›ì§‘ #ì²­ê³„ì²œë§›ì§‘ #ì¢…ë¡œë§›ì§‘ #ì¢…ë¡œ3ê°€ë§›ì§‘ #ì¶©ë¬´ë¡œë§›ì§‘ì´ˆë°˜ì‹ë‹¹",
        "insta_analysis": "",
        "insta_analysis_food": false,
        "is_ad": false
    },
.... ì¤‘ëµ ....
]
```

<br>

#### GET baseurl/posts/<í‚¤ì›Œë“œ>/<ì ìˆ˜>
í‚¤ì›Œë“œë¡œ ìŠ¤í¬ë© ëœ ëª¨ë“  í¬ìŠ¤íŠ¸ë“¤ ì¤‘ì—ì„œ ìŒì‹ì ìˆ˜ê°€ ì›í•˜ëŠ” ê°’ë³´ë‹¤ ë†’ì€ í¬ìŠ¤íŠ¸ë“¤ë§Œ ë³´ì—¬ì§‘ë‹ˆë‹¤. <br>
posted_date ìµœì‹ ìˆœìœ¼ë¡œ ë³´ì—¬ì§‘ë‹ˆë‹¤. <br>
ex) GET http://127.0.0.1:8443/posts/í•©ì •ë§›ì§‘/50
```json
[
    {
        "id": 29260,
        "post_id": "CWur----K9N",
        "post_url": "https://www.instagram.com/p/CWur----K9N/",
        "img_url": "https://www.instagram.com/p/CWur----K9N/media/?size=l",
        "keyword": "í•©ì •ë§›ì§‘",
        "food_score": 94.64,
        "scraped_date": "2021-11-26T15:42:41.475726+09:00",
        "posted_date": "2021-11-26T15:39:08+09:00",
        "post_text": "ì¶”ì›Œì§€ëŠ” ìš”ì¦˜ ìê¾¸ìê¾¸ ìƒê°ë‚˜ëŠ” ë³´ì´ ë°€í¬í‹° \nê¸°ì¡´ì— ë°€í¬í‹°ëˆ„ ìŠì–´ë¼ í•œë²ˆ ë§› ë³´ë©´ ë¹ ì ¸ë“œëŠ” ë§› \nì»¤í”¼ ë§›ì§‘ ë¯¸ìœ ë‹¹  ì™• í¬ë¡œí”Œ  í•˜ë‚˜ë§Œ ë¨¹ì–´ë„ ë°°ê°€ ë“ ë“   ë‹¬ë‹¬í•œ ë³´ì´ë°€í¬í‹°ì— ê³ ì†Œí•œ í”Œë ˆì¸í¬ë¡œí”Œ ìŒ‰ìŒ€êµ¬ìˆ˜í•œ ì•„ë©”ë¦¬ì¹´ë…¸ì—ëŠ” ë‹¬ë‹¬ë¦¬ ë¸”ë£¨ë² ë¦¬ í¬ë¡œí”Œ í•œë²ˆë„ ì•ˆ ë¨¹ì€ ì‚¬ëŒì€ ìˆì–´ë„ í•œë²ˆë§Œ ë¨¹ì€ ì‚¬ëŒì€ ì—†ëŠ” ë¯¸ìœ ë‹¹ ë³´ì´ì¹´ë…¸ ë³´ì´ë°€í¬í‹° \nì´ì œëŠ” ì„ íƒì— í­ì„ ë„“í˜€ ì»¤í”¼ë„ í•¨ê»˜ í• ìˆ˜ ìˆëŠ” \në™ì„œì–‘ì˜ ë§Œë‚¨ \n#ë¯¸ìœ ë‹¹#ë³´ì´ì¹´ë…¸#ì•„ë©”ë¦¬ì¹´ë…¸#ë³´ì´ë°€í¬í‹°#ì™•í¬ë¡œí”Œ#í•©ì •#í•©ì •ë§›ì§‘#ê±´ê°•#íë§#ë³´ì´ì°¨ì™€ì»¤í”¼ë¥¼ë¯¸ìœ ë‹¹ì—ì„œ",
        "insta_analysis": "",
        "insta_analysis_food": false,
        "is_ad": false
    },
    {
        "id": 29256,
        "post_id": "CWuq----zsu",
        "post_url": "https://www.instagram.com/p/CWuq----zsu/",
        "img_url": "https://www.instagram.com/p/CWuq----zsu/media/?size=l",
        "keyword": "í•©ì •ë§›ì§‘",
        "food_score": 96.96,
        "scraped_date": "2021-11-26T15:42:37.484558+09:00",
        "posted_date": "2021-11-26T15:31:41+09:00",
        "post_text": "#ë¯¸ë„ì¸\nê´‘ì£¼ì— ì´ëŸ°ê³³ ìƒê²¼ìŒë©´ ì¢‹ê² ë‹¤!!\n.\n.\n.\n#í™ëŒ€ë¼ë©˜#í•©ì •ë§›ì§‘#í™ëŒ€ë°ì´íŠ¸ì½”ìŠ¤#í™ëŒ€ë§›ì§‘#ë¯¸ë„ì¸í™ëŒ€#í™ëŒ€ë§›ì§‘ë¯¸ë„ì¸#í•©ì •ë°ì´íŠ¸#í™ëŒ€ìŠ¤í…Œì´í¬#ë¼ë©˜ë§›ì§‘#í™ëŒ€ìŠ¤í…Œì´í¬ë§›ì§‘",
        "insta_analysis": "",
        "insta_analysis_food": false,
        "is_ad": false
    },
...ì¤‘ëµ...
]
```

<br>

#### POST baseurl/<í‚¤ì›Œë“œ>
í‚¤ì›Œë“œë¡œ ìŠ¤í¬ë© ëœ í¬ìŠ¤íŠ¸ê°€ í•˜ë‚˜ë„ ì—†ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¯¸ë¦¬ ì§€ì •ëœ í˜•ì‹ì˜ ë”ë¯¸í¬ìŠ¤íŠ¸ê°€ ì €ì¥ë©ë‹ˆë‹¤.
ì €í¬ ì„œë²„ì—ì„œëŠ” íŠ¹ì •í‚¤ì›Œë“œì— í¬ìŠ¤íŠ¸ê°€ í•˜ë‚˜ë°–ì— ì—†ìœ¼ë©´ ìŠ¤í¬ë©ëŒ€ìƒì´ì§€ë§Œ ì•„ì§ ìŠ¤í¬ë©ë˜ì§€ ì•Šì€ ê±¸ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.
ë”°ë¼ì„œ í•´ë‹¹ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ê³§ í•´ë‹¹ í‚¤ì›Œë“œë¡œ ìŠ¤í¬ë©í•˜ê²Œ ë©ë‹ˆë‹¤. <br>
ex) POST http://127.0.0.1:8443/post/ì„œê·€í¬ë§›ì§‘ <br>
return status code 201
```json
{
    "id": 31672,
    "post_id": "dummy",
    "post_url": "dummy",
    "img_url": "https://images.unsplash.com/photo-1604147706283-d7119b5b822c?w=640",
    "keyword": "ì„œê·€í¬ë§›ì§‘",
    "food_score": 0.0,
    "scraped_date": "2021-12-06T18:27:53.097114+09:00",
    "posted_date": "2020-12-06T18:09:35.623587+09:00",
    "post_text": "dummy",
    "insta_analysis": "dummy",
    "insta_analysis_food": false,
    "is_ad": false
}
```

<br><br>

### (2) ì„œë²„ ì‚¬ì´ë“œ í†µì‹ ìš©
#### GET baseurl/not-scraped-yet
ì•„ì§ ìŠ¤í¬ë©ë˜ì§€ ì•Šì€ í‚¤ì›Œë“œ ëª©ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. <br>
ì •í™•íˆëŠ” í‚¤ì›Œë“œë³„ë¡œ í¬ìŠ¤íŠ¸ê°œìˆ˜ê°€ 1ê°œì¸ í‚¤ì›Œë“œ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤. <br>
í•´ë‹¹ ì„œë²„ëŠ” í‚¤ì›Œë“œë³„ë¡œ í¬ìŠ¤íŠ¸ ê°œìˆ˜ê°€ 1ê°œ ì´ìƒì¸ í‚¤ì›Œë“œë¥¼ ìŠ¤í¬ë© ëŒ€ì‚¬ìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.
ë˜í•œ í‚¤ì›Œë“œë³„ë¡œ í¬ìŠ¤íŠ¸ ê°œìˆ˜ê°€ 1ê°œì¸ í‚¤ì›Œë“œëŠ” ì•„ì§ ìŠ¤í¬ë©ë˜ì§€ ì•Šì€ í‚¤ì›Œë“œë¡œ íŒë‹¨í•©ë‹ˆë‹¤. <br>
ê°ê°ì˜ í‚¤ì›Œë“œì— ëŒ€í•˜ì—¬, ë“±ë¡ëœ ë‚ ì§œê°€ ê°€ì¥ ì˜¤ë˜ëœ(ì²˜ìŒë“±ë¡ëœ) í¬ìŠ¤íŠ¸ì˜ ë‚ ì§œê°€ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ë³´ì—¬ì§‘ë‹ˆë‹¤. <br>
ex) GET http://localhost:8443/not-scraped-yet
```json
{
    "keyword_list": [
        "ì„œê·€í¬ë§›ì§‘"
    ]
}
```

<br>

#### GET baseurl/keywords
í•œë²ˆì´ìƒ ìŠ¤í¬ë©ëœ í‚¤ì›Œë“œ ëª©ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. <br>
í¬ìŠ¤íŠ¸ ê°œìˆ˜ê°€ 2ê°œ ì´ìƒì¸ í‚¤ì›Œë“œ ëª©ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. <br>
ê°ê°ì˜ í‚¤ì›Œë“œì— ëŒ€í•˜ì—¬, ë“±ë¡ëœ ë‚ ì§œê°€ ê°€ì¥ ì˜¤ë˜ëœ(ì²˜ìŒë“±ë¡ëœ) í¬ìŠ¤íŠ¸ì˜ ë‚ ì§œê°€ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ë³´ì—¬ì§‘ë‹ˆë‹¤. <br>
ex) GET http://localhost:8443/keywords
```json
{
    "keyword_list": [
        "ì„±ìˆ˜ë§›ì§‘",
        "í™ëŒ€ë§›ì§‘",
        "í•©ì •ë§›ì§‘",
...ì¤‘ëµ...
        "ì†¡íŒŒë§›ì§‘",
        "ì²œí˜¸ë§›ì§‘",
        "ì‚°ë³¸ë§›ì§‘",
        "ëª©í¬ë§›ì§‘",
        "êµ°ë§Œë‘ë§›ì§‘",
        "ì˜ì •ë¶€ë§›ì§‘"
    ]
}
```

<br>

#### GET baseurl/all-keywords
í¬ìŠ¤íŠ¸ê°œìˆ˜ì™€ ìƒê´€ì—†ì´ ëª¨ë“  í‚¤ì›Œë“œëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
ìŠ¤í¬ë©í•  ê³„ì •ì„ ì¸ë±ì‹±í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. <br>
ê°ê°ì˜ í‚¤ì›Œë“œì— ëŒ€í•˜ì—¬, ë“±ë¡ëœ ë‚ ì§œê°€ ê°€ì¥ ì˜¤ë˜ëœ(ì²˜ìŒë“±ë¡ëœ) í¬ìŠ¤íŠ¸ì˜ ë‚ ì§œê°€ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ë³´ì—¬ì§‘ë‹ˆë‹¤. <br>
ex) GET http://localhost:8443/all-keywords
```json
{
    "keyword_list": [
        "ì„±ìˆ˜ë§›ì§‘",
        "í™ëŒ€ë§›ì§‘",
...ì¤‘ëµ...
        "ì˜ì •ë¶€ë§›ì§‘",
        "ì„œê·€í¬ë§›ì§‘"
    ]
}
```

<br>

#### POST baseurl/posts
í¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. jsoní˜•ì‹ì„ ë‹´ì•„ ìš”ì²­í•©ë‹ˆë‹¤. <br>
ë˜í•œ ìŠ¤í¬ë© í–ˆì„ë•Œ ìŠ¤í¬ë© ê²°ê³¼ë¬¼ì´ 0ê°œ ì¼ë•Œë„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì´ë•ŒëŠ” not-scraped-yet ëª©ë¡ì— ë‚˜ì˜¤ì§€ ì•Šê²Œ í•˜ëŠ” ëª©ì ì…ë‹ˆë‹¤. <br>
ex) POST http://localhost:8443/posts
```json
{
    "post_id": "dummy1",
    "post_url": "dummy1",
    "img_url": "https://images.unsplash.com/photo-1604147706283-d7119b5b822c",
    "keyword": "ëª…ë™ë§›ì§‘",
    "post_text": "dummy1",
    "posted_date": "2021-09-23T12:00:50+0000",
    "insta_analysis": "dummy1",
    "insta_analysis_food": false,
    "is_ad": false
}
```

return)
```json
{
    "id": 31673,
    "post_id": "dummy1",
    "post_url": "dummy1",
    "img_url": "https://images.unsplash.com/photo-1604147706283-d7119b5b822c",
    "keyword": "ëª…ë™ë§›ì§‘",
    "food_score": 0.0,
    "scraped_date": "2021-12-06T18:55:06.505473+09:00",
    "posted_date": "2021-09-23T21:00:50+09:00",
    "post_text": "dummy1",
    "insta_analysis": "dummy1",
    "insta_analysis_food": false,
    "is_ad": false
}
```

<br><br>

### (3) ë‹¨ìˆœ í™•ì¸ìš©
#### GET baseurl/posts
ëª¨ë“  í¬ìŠ¤íŠ¸ ëª©ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. <br>
ex) GET http://127.0.0.1:8443/posts

<br>

#### GET PUT DELETE baseurl/post/<(id)>
idì— í•´ë‹¹í•˜ëŠ” í¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜, ìˆ˜ì •í•˜ê±°ë‚˜, ì‚­ì œí•©ë‹ˆë‹¤. <br>
ex) GET PUT DELETE http://localhost:8443/post/70

<br>

#### GET DELETE baseurl/post/<í‚¤ì›Œë“œ>/<post_id>
í‚¤ì›Œë“œì™€ post_idì— í•´ë‹¹í•˜ëŠ” í¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜, ì‚­ì œí•©ë‹ˆë‹¤. <br>
ex) GET DELETE http://192.168.0.5:8443/post/í™ëŒ€ë§›ì§‘/CWKs----83r

<br>

#### GET baseurl/all-keywords-alphabet
ëª¨ë“  í‚¤ì›Œë“œë¥¼ ì•ŒíŒŒë²³ìˆœì„œë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. <br>
ex) GET http://localhost:8443/all-keywords-alphabet

<br>

#### GET baseurl/all-posts
ëª¨ë“  í¬ìŠ¤íŠ¸ëª©ë¡ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. <br>
í˜ì´ì§•ì´ ì ìš©ë˜ì–´ ë°˜í™˜ë©ë‹ˆë‹¤. <br>
ex) GET http://localhost:8443/all-posts
